# 技术文档查看功能

## 功能说明

在个人主页的实习经历部分添加了"查看技术文档"按钮，用户可以通过该按钮查看相关的技术文档。

## 功能特性

### 1. 文档查看器 (`docs-viewer.html`)
- **横版导航栏设计**：导航栏位于页面顶部，采用水平布局，支持移动端横向滚动
- **响应式设计**：支持桌面端和移动端，适配各种屏幕尺寸
- **Markdown渲染**：使用 `marked.js v4.3.0` 稳定版本渲染Markdown文档
- **代码高亮**：使用 `Prism.js` 进行语法高亮
- **设计一致性**：与主网站设计风格保持一致
- **错误处理增强**：详细的错误信息和重新加载按钮
- **返回主界面功能**：
  - 右上角固定返回主页按钮
  - 点击文档外侧遮罩层返回主页
  - 支持ESC键快捷返回

### 2. 支持的文档
- **MCP PyMilvus代码生成器**: 基于RAG框架的代码生成工具
- **Deep Searcher**: 深度搜索引擎功能
- **MCP Server Milvus**: Milvus查询功能的MCP服务

### 3. 访问方式
1. 在主页实习经历部分点击"查看技术文档"按钮
2. 直接访问 `docs-viewer.html` 页面
3. 通过URL参数直接打开特定文档：`docs-viewer.html?doc=mcp-pymilvus-code-generate-helper`

### 4. 返回主界面的方式
1. 点击右上角"返回主页"按钮
2. 点击文档内容区域外的灰色遮罩层
3. 按ESC键快捷返回
4. 点击导航栏中的"返回主页"链接

## 技术实现

### 前端技术栈
- **Tailwind CSS**: 样式框架
- **Font Awesome**: 图标库
- **marked.js v4.3.0**: Markdown解析和渲染（稳定版本）
- **Prism.js**: 代码语法高亮

### 文件结构
```
├── docs-viewer.html          # 文档查看器页面（横版导航栏）
├── docs/                     # 技术文档目录
│   ├── mcp-pymilvus-code-generate-helper.md
│   ├── deep-searcher.md
│   └── mcp-server-milvus.md
└── index.html               # 主页（已添加按钮）
```

### 核心功能
1. **异步文档加载**: 使用 `fetch API` 异步加载Markdown文件
2. **稳定的Markdown渲染**: 使用marked.js v4.3.0稳定版本API
3. **代码高亮**: 使用 `Prism.js` 自动高亮代码块，支持延迟执行
4. **错误处理**: 文档加载失败时显示详细错误信息和多个恢复选项
5. **导航状态管理**: 横版导航栏支持活跃状态显示
6. **用户体验优化**: 多种返回主界面的方式
7. **调试支持**: 添加了详细的控制台日志输出

## 最近更新 (v2.1)

### 🔧 关键Bug修复
- **修复HTML源码显示问题**:
  - 回退到marked.js v4.3.0稳定版本
  - 使用经过验证的稳定API调用方式
  - 添加HTML内容验证，确保解析成功
  - 改进错误检测和日志输出

### ✨ 新增功能
- **多种返回主界面方式**:
  - 右上角固定"返回主页"按钮（带半透明背景）
  - 点击文档外侧灰色遮罩层返回
  - 键盘ESC快捷键支持
  - 改进的导航栏返回链接

### 🎨 用户体验改进
- **更好的视觉反馈**: 遮罩层提供明确的点击区域
- **固定返回按钮**: 始终可见的返回按钮，使用毛玻璃效果
- **键盘支持**: ESC键快速返回，提高操作效率
- **错误页面优化**: 提供多种恢复选项和详细问题分析

### 🛠️ 技术改进
- **API稳定性**: 使用marked.js稳定版本，避免新版本兼容性问题
- **代码高亮优化**: 延迟执行确保DOM更新完成
- **依赖检测**: 页面加载时检测关键库是否正确加载
- **调试增强**: 详细的控制台日志便于问题诊断

## 使用方法

### 本地开发
```bash
# 启动本地服务器
python3 -m http.server 8000

# 访问主页
open http://localhost:8000/index.html

# 直接访问文档查看器
open http://localhost:8000/docs-viewer.html
```

### 部署要求
- 需要HTTP服务器支持（不能直接用 `file://` 协议访问）
- 确保 `docs/` 文件夹中的 `.md` 文件可以被访问
- 支持现代浏览器（ES6+）
- 需要网络连接以加载CDN资源

## 移动端优化

- **横版导航栏**: 在移动端支持横向滚动，避免按钮拥挤
- **触摸友好**: 按钮大小和间距适合触摸操作
- **响应式布局**: 文档内容在各种屏幕尺寸下都能良好显示
- **返回按钮**: 固定位置的返回按钮在移动端易于访问

## 故障排除

### 常见问题
1. **文档显示HTML源码**
   - 确认marked.js库正确加载（v4.3.0）
   - 检查浏览器控制台错误信息
   - 刷新页面重新加载依赖库
   - 使用重新加载按钮重试

2. **文档加载失败**
   - 检查网络连接
   - 确认HTTP服务器正在运行
   - 查看浏览器控制台错误信息
   - 使用重新加载按钮重试

3. **代码高亮不工作**
   - 确认Prism.js库正确加载
   - 检查网络连接到CDN
   - 代码块可能需要稍等片刻进行高亮

4. **无法返回主界面**
   - 尝试点击右上角返回按钮
   - 点击文档外侧灰色区域
   - 按ESC键
   - 刷新页面

### 调试技巧
- 打开浏览器开发者工具查看控制台日志
- 检查网络面板确认资源正确加载
- 使用重新加载功能重试操作

## 扩展功能

如需添加新的技术文档：

1. 将 `.md` 文件放入 `docs/` 文件夹
2. 在 `docs-viewer.html` 的横版导航栏中添加对应按钮
3. 调用 `loadDoc('文档名')` 函数加载新文档

示例：
```html
<button onclick="loadDoc('new-doc')" 
        class="nav-item flex items-center px-4 py-2 rounded-lg text-gray-700 hover:bg-primary hover:text-white transition-colors whitespace-nowrap">
    <i class="fa-solid fa-file mr-2"></i>
    新技术文档
</button>
```

## 版本历史

- **v2.1** (当前): 修复HTML源码显示问题 + 添加返回主界面功能
- **v2.0**: 横版导航栏 + Bug修复
- **v1.0**: 初始版本，侧边栏导航 